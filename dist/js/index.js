"use strict";$(function(){$.ajax({type:"get",url:"api/ndex.php",async:!1,success:function(n){for(var a=JSON.parse(n),s=[],i=0;i<10;i++)s.push(a[i]);var e=(s=deepClone(s)).map(function(n){return' <a href="javascript:;"  title="" class="groupblock" id="item_'+n.id+'"" data-id="'+n.id+'"">\n                                <div class="gds-img">\n                                    <img width="219" height="219" src="img/loading.gif" data-src="img/'+n.img+'" alt="">\n                                    <i class="mia-icon mark-qfl"></i>\n                                </div>\n                                <div class="rim">\n                                    <div class="tit">'+n.name+'</div>\n                                    <p class="desc">'+n.tite+'</p> \n                                    <i class="gsh-mark" style="display:none;">自营</i>\n                                    <div class="price"> \n                                        <span class="new">秒杀价:¥<em>'+n.new_price+'</em></span> \n                                        <span class="old">市场价:¥<em>'+n.old_price+'</em></span> \n                                    </div>\n                                    <p class="buy">12人已买</p> \n                                    <span class="btn">马上抢</span>\n                                 </div>\n                             </a>'}).join("");$("#recommend").html(e);var t=[];for(i=0;i<5;i++)t.push(a[i]);var c=(t=deepClone(t)).map(function(n){return'<div class="blank_items" data-id="'+n.id+'";>\n                                <a href="javascript:;">\n                                    <div class="gds-img">\n                                        <img class="lazyload"\n                                            src="img/loading.gif"\n                                            data-src="img/'+n.img+'">\n                                        <span class="free_tax">限时秒杀</span>\n                                    </div>\n                                    <div class="gds-desc">\n                                        <p class="tit">'+n.name+'</p>\n                                        <div class="price">\n                                            <span class="new">¥<em>'+n.new_price+'</em></span>\n                                            <span class="old">¥<em> '+n.old_price+"</em></span>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div> "}).join("");$(".blank_bock").eq(0).html(c);var l=[];for(i=10;i<15;i++)l.push(a[i]);var d=(l=deepClone(l)).map(function(n){return'<div class="blank_items" data-id="'+n.id+'";>\n                                <a href="javascript:;">\n                                    <div class="gds-img">\n                                        <img class="lazyload"\n                                            src="img/loading.gif"\n                                            data-src="img/'+n.img+'">\n                                        <span class="free_tax">限时秒杀</span>\n                                    </div>\n                                    <div class="gds-desc">\n                                        <p class="tit">'+n.name+'</p>\n                                        <div class="price">\n                                            <span class="new">¥<em>'+n.new_price+'</em></span>\n                                            <span class="old">¥<em> '+n.old_price+"</em></span>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div> "}).join("");$(".blank_bock").eq(1).html(d);var r=[];for(i=5;i<10;i++)r.push(a[i]);var o=(r=deepClone(r)).map(function(n){return'<div class="blank_items" data-id="'+n.id+'";>\n                                <a href="javascript:;" target="">\n                                    <div class="gds-img">\n                                        <img class="lazyload"\n                                            src="img/loading.gif"\n                                            data-src="img/'+n.img+'">\n                                        <span class="free_tax">限时秒杀</span>\n                                    </div>\n                                    <div class="gds-desc">\n                                        <p class="tit">'+n.name+'</p>\n                                        <div class="price">\n                                            <span class="new">¥<em>'+n.new_price+'</em></span>\n                                            <span class="old">¥<em> '+n.old_price+"</em></span>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div> "}).join("");$(".blank_bock").eq(2).html(o);var p=[];for(i=0;i<5;i++)p.push(a[i]);var m=(p=deepClone(p)).map(function(n){return'<div class="blank_items" data-id="'+n.id+'";>\n                                <a href="javascript:;" target="">\n                                    <div class="gds-img">\n                                        <img class="lazyload"\n                                            src="img/loading.gif"\n                                            data-src="img/'+n.img+'">\n                                        <span class="free_tax">限时秒杀</span>\n                                    </div>\n                                    <div class="gds-desc">\n                                        <p class="tit">'+n.name+'</p>\n                                        <div class="price">\n                                            <span class="new">¥<em>'+n.new_price+'</em></span>\n                                            <span class="old">¥<em> '+n.old_price+"</em></span>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div> "}).join("");$(".blank_bock").eq(3).html(m)}});var i,e,t,c,l,n=new Swiper(".swiper-container",{autoplay:{delay:4e3,disableOnInteraction:!1},loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(n,a){return'<span class="'+a+'"></span>'}},effect:"fade",fadeEffect:{crossFade:!1},touchRatio:0}),a=document.getElementById("swiper-container");function s(){$.ajax({type:"get",url:"api/cart.php",success:function(n){var a=JSON.parse(n);console.log(a),console.log(a.length);var s=a.length;if(s){$("#cart_num").show().html(s);var i="<h5>最近加入的商品</h5>"+a.map(function(n){return' \n                                    <dl>\n                                        <dt>\n                                            <a href="html/goodslist.html" target="_blank">\n                                                <img src="img/'+n.img+'"\n                                                    height="50" width="50" alt="'+n.name+' ">\n                                            </a>\n                                        </dt>\n                                        <dd>\n                                            <p class="tit"><span class="price">¥'+n.price+'</span>\n                                                <a href="html/goodslist.html" target="_blank">'+n.name+'</a>\n                                            </p>\n                                            <p class="num">x'+n.num+"</p>\n                                        </dd>\n                                    </dl>"}).join("")+'<div class="to"><a href="html/cart.html" target="_blank">查看我的购物车</a></div>';$("#shop_cart").html(i),$("#shop_cart .empty").hide()}else $("#cart_num").hide().html(),$("#shop_cart .empty").show()}})}a.onmouseover=function(){n.autoplay.stop()},a.onmouseout=function(){n.autoplay.start()},window.addEventListener("scroll",(i=function(){var i=document.documentElement.clientHeight,e=document.documentElement.scrollTop||document.body.scrollTop;$(".gds-img img").each(function(n,a){var s=$(".gds-img img").eq(n).data("src");$(".gds-img img").eq(n).offset().top<i+e&&s==s&&$(".gds-img img").eq(n).attr("src",s)})},e=500,t=1e3,l=new Date,function(){var n=this,a=arguments,s=new Date;clearTimeout(c),t<=s-l?(i.apply(n,a),l=s):c=setTimeout(function(){i.apply(n,a)},e)})),$(".groupblock").click(function(){var n=$(this).data("id");location.href="html/goods_center.html?"+n}),$(".blank_bock .blank_items").click(function(){var n=$(this).data("id");location.href="html/goods_center.html?"+n}),$("#cart_num").mouseover(function(){s()}),s()});